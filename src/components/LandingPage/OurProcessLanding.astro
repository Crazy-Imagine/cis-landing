---
import type { ImageMetadata } from 'astro';
import { Image } from 'astro:assets';
import Typography from '../Typography.astro';
import CTAButtons from './CTAButtons.astro';

const images = import.meta.glob<{ default: ImageMetadata }>('/src/assets/landing/*.webp');

interface Data {
  image: string;
  title?: string;
  class?: string;
  containerClass?: string;
}

interface Props {
  data: Data[];
}

const { data } = Astro.props;
---

<div
  class="mx-auto flex h-fit flex-col gap-20 !bg-white p-5 2xl:container md:px-5 lg:px-10 lg:py-20"
>
  <Typography as="span" variant="h2" class="text-center font-nexaBold font-bold text-primary">
    Conoce nuestro Proceso
  </Typography>

  <div
    style={{ grid: 'none' }}
    class="flex flex-col items-center gap-4
    lg:grid lg:auto-rows-min lg:grid-cols-3 lg:grid-rows-3 lg:gap-4"
  >
    {
      data.map((item, index) => {
        const arrows = [1, 3, 5];
        if (arrows.includes(index)) {
          return (
            <>
              {index === 3 && <div class="hidden lg:block" />}
              <div class={item.containerClass}>
                <Image
                  class={item.class}
                  src={images['/src/assets/landing/stepsArrow.webp']()}
                  alt={'stepsArrow'}
                />
              </div>
            </>
          );
        }
        return (
          <>
            <div class="flex h-auto w-[250px] flex-col items-center justify-center lg:w-full">
              <Image class="h-auto max-h-full" src={images[item.image]()} alt={item.title || ''} />
              <Typography as="span" variant="h4" class="font-bold text-primary">
                {item.title ?? ''}
              </Typography>
            </div>
            {index === 2 && <div class="hidden lg:block" />}
          </>
        );
      })
    }

    <!-- <div class="flex h-auto w-[250px] flex-col items-center justify-center lg:w-full">
      <Image
        class="h-auto max-h-full"
        src={images['/src/assets/landing/Group2.webp']()}
        alt={'selection'}
      />
      <Typography as="span" variant="h4" class="font-bold text-primary">Selección</Typography>
    </div>

    <div class="hidden lg:block"></div>

    <div class="flex h-auto items-center justify-center lg:col-start-3 lg:row-start-2">
      <Image
        class="h-auto max-h-full rotate-90"
        src={images['/src/assets/landing/stepsArrow.webp']()}
        alt={'stepsArrow'}
      />
    </div>

    <div
      class="flex h-auto w-[250px] flex-col items-center justify-center lg:col-start-3 lg:row-start-3 lg:w-full"
    >
      <Image
        class="h-auto max-h-full"
        src={images['/src/assets/landing/Group4.webp']()}
        alt={'onboarding'}
      />
      <Typography as="span" variant="h4" class="font-bold text-primary">Onboarding</Typography>
    </div>

    <div class="flex h-auto items-center justify-center lg:col-start-2 lg:row-start-3">
      <Image
        class="h-auto max-h-full rotate-90 lg:rotate-180"
        src={images['/src/assets/landing/stepsArrow.webp']()}
        alt={'stepsArrow'}
      />
    </div>

    <div
      class="flex h-auto w-[250px] flex-col items-center justify-center lg:col-start-1 lg:row-start-3 lg:w-full"
    >
      <Image
        class="h-auto max-h-full"
        src={images['/src/assets/landing/Group3.webp']()}
        alt={'follow'}
      />
      <Typography as="span" variant="h4" class="font-bold text-primary">Seguimiento</Typography>
    </div> -->
  </div>

  <CTAButtons
    text="Descubre Cómo Escalar tu Equipo"
    href="#contact"
    variant="primary"
    class="mt-14 place-self-center"
    textClass="lg:text-[30px]"
  />
</div>
